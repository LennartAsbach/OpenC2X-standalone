<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>ITSProtocolStack: CaService Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ITSProtocolStack
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classCaService.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classCaService-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CaService Class Reference<div class="ingroups"><a class="el" href="group__cam.html">CA Service Module</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Class that handles the receiving, creating and sending of CA Messages.  
 <a href="classCaService.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="caservice_8h_source.html">caservice.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for CaService:</div>
<div class="dyncontent">
<div class="center"><img src="classCaService__coll__graph.png" border="0" usemap="#CaService_coll__map" alt="Collaboration graph"/></div>
<map name="CaService_coll__map" id="CaService_coll__map">
<area shape="rect" id="node2" href="classCommunicationSender.html" title="Sender of zmq broadcasts to be received by CommunicationReceiver. " alt="" coords="215,79,369,105"/>
<area shape="rect" id="node3" href="classLoggingUtility.html" title="A wrapper class for the easylogging++ libary. " alt="" coords="5,79,107,105"/>
<area shape="rect" id="node5" href="classCommunicationReceiver.html" title="Receiver of zmq broadcasts send by CommunicationSender. " alt="" coords="209,132,375,159"/>
<area shape="rect" id="node4" href="structGlobalConfig.html" title="Struct that hold the global configuration. " alt="" coords="243,187,341,213"/>
<area shape="rect" id="node6" href="structCaServiceConfig.html" title="Struct that hold the configuration for CaService. " alt="" coords="231,237,353,264"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a78a32257b5cc71d737dbd5fdd15daf29"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#a78a32257b5cc71d737dbd5fdd15daf29">CaService</a> (<a class="el" href="structCaServiceConfig.html">CaServiceConfig</a> &amp;config)</td></tr>
<tr class="separator:a78a32257b5cc71d737dbd5fdd15daf29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6fdb21975bd8bcb62f0198796f5e251"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#ad6fdb21975bd8bcb62f0198796f5e251">~CaService</a> ()</td></tr>
<tr class="separator:ad6fdb21975bd8bcb62f0198796f5e251"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8bf18fb0bf24dba2eb8c60a5868bc36"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#ad8bf18fb0bf24dba2eb8c60a5868bc36">send</a> ()</td></tr>
<tr class="memdesc:ad8bf18fb0bf24dba2eb8c60a5868bc36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a new CAM to <a class="el" href="classLDM.html" title="The Local Dynamic Map (LDM) is responsible for maintaining data that is part of ITS. ">LDM</a> and <a class="el" href="classDCC.html" title="Decentralized Congestion Control. ">DCC</a>.  <a href="#ad8bf18fb0bf24dba2eb8c60a5868bc36">More...</a><br /></td></tr>
<tr class="separator:ad8bf18fb0bf24dba2eb8c60a5868bc36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad27624cda96aba9c539ae9675c59f5ef"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#ad27624cda96aba9c539ae9675c59f5ef">getHeading</a> (double lat1, double lon1, double lat2, double lon2)</td></tr>
<tr class="memdesc:ad27624cda96aba9c539ae9675c59f5ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the heading towards North based on the two specified coordinates.  <a href="#ad27624cda96aba9c539ae9675c59f5ef">More...</a><br /></td></tr>
<tr class="separator:ad27624cda96aba9c539ae9675c59f5ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6148607c13a0fba2c93ca7805f98b21"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#ad6148607c13a0fba2c93ca7805f98b21">getDistance</a> (double lat1, double lon1, double lat2, double lon2)</td></tr>
<tr class="memdesc:ad6148607c13a0fba2c93ca7805f98b21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the distance between the two specified coordinates.  <a href="#ad6148607c13a0fba2c93ca7805f98b21">More...</a><br /></td></tr>
<tr class="separator:ad6148607c13a0fba2c93ca7805f98b21"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a3a3f9e0fbd18b5ea1fd9dbfbbc47b24f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#a3a3f9e0fbd18b5ea1fd9dbfbbc47b24f">receive</a> ()</td></tr>
<tr class="memdesc:a3a3f9e0fbd18b5ea1fd9dbfbbc47b24f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receives incoming CAMs from <a class="el" href="classDCC.html" title="Decentralized Congestion Control. ">DCC</a> and forwards them to <a class="el" href="classLDM.html" title="The Local Dynamic Map (LDM) is responsible for maintaining data that is part of ITS. ">LDM</a>.  <a href="#a3a3f9e0fbd18b5ea1fd9dbfbbc47b24f">More...</a><br /></td></tr>
<tr class="separator:a3a3f9e0fbd18b5ea1fd9dbfbbc47b24f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2484d629c6218e25411fb368c7cdaf39"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#a2484d629c6218e25411fb368c7cdaf39">logDelay</a> (std::string serializedCam)</td></tr>
<tr class="memdesc:a2484d629c6218e25411fb368c7cdaf39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logs the delay of the specified (serialized) CAM between its creation time and the current time.  <a href="#a2484d629c6218e25411fb368c7cdaf39">More...</a><br /></td></tr>
<tr class="separator:a2484d629c6218e25411fb368c7cdaf39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada633e818d6379d6989778f3cfd8d708"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#ada633e818d6379d6989778f3cfd8d708">sendCamInfo</a> (std::string triggerReason, double delta)</td></tr>
<tr class="memdesc:ada633e818d6379d6989778f3cfd8d708"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends information about why a CAM was triggered to <a class="el" href="classLDM.html" title="The Local Dynamic Map (LDM) is responsible for maintaining data that is part of ITS. ">LDM</a>.  <a href="#ada633e818d6379d6989778f3cfd8d708">More...</a><br /></td></tr>
<tr class="separator:ada633e818d6379d6989778f3cfd8d708"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5906435dafacd0771261f7754631ad3d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#a5906435dafacd0771261f7754631ad3d">triggerCam</a> (const boost::system::error_code &amp;ec)</td></tr>
<tr class="memdesc:a5906435dafacd0771261f7754631ad3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Periodically checks the rules for triggering a new CAM.  <a href="#a5906435dafacd0771261f7754631ad3d">More...</a><br /></td></tr>
<tr class="separator:a5906435dafacd0771261f7754631ad3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a995e320e7b1f29554288cb929593fde2"><td class="memItemLeft" align="right" valign="top">camPackage::CAM&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#a995e320e7b1f29554288cb929593fde2">generateCam</a> ()</td></tr>
<tr class="memdesc:a995e320e7b1f29554288cb929593fde2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a new CAM.  <a href="#a995e320e7b1f29554288cb929593fde2">More...</a><br /></td></tr>
<tr class="separator:a995e320e7b1f29554288cb929593fde2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec7622a245a0aaebd85100c06dd77d8c"><td class="memItemLeft" align="right" valign="top">dataPackage::DATA&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#aec7622a245a0aaebd85100c06dd77d8c">generateData</a> (camPackage::CAM cam)</td></tr>
<tr class="memdesc:aec7622a245a0aaebd85100c06dd77d8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a new data package that includes the specified CAM.  <a href="#aec7622a245a0aaebd85100c06dd77d8c">More...</a><br /></td></tr>
<tr class="separator:aec7622a245a0aaebd85100c06dd77d8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae447eb670857e702acd207abb4821b3a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#ae447eb670857e702acd207abb4821b3a">receiveGpsData</a> ()</td></tr>
<tr class="memdesc:ae447eb670857e702acd207abb4821b3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receives new GPS data from the GPS module.  <a href="#ae447eb670857e702acd207abb4821b3a">More...</a><br /></td></tr>
<tr class="separator:ae447eb670857e702acd207abb4821b3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa694c3e6d4163bcecdd75d8945bd8a4c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#aa694c3e6d4163bcecdd75d8945bd8a4c">receiveObd2Data</a> ()</td></tr>
<tr class="memdesc:aa694c3e6d4163bcecdd75d8945bd8a4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receives new OBD2 data from the OBD2 module.  <a href="#aa694c3e6d4163bcecdd75d8945bd8a4c">More...</a><br /></td></tr>
<tr class="separator:aa694c3e6d4163bcecdd75d8945bd8a4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48ac117d5580a5c90960d81a0db9a9f2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#a48ac117d5580a5c90960d81a0db9a9f2">isHeadingChanged</a> ()</td></tr>
<tr class="memdesc:a48ac117d5580a5c90960d81a0db9a9f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if heading has changed more than 4 degrees.  <a href="#a48ac117d5580a5c90960d81a0db9a9f2">More...</a><br /></td></tr>
<tr class="separator:a48ac117d5580a5c90960d81a0db9a9f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9759eb7d00728507beeff0cfd4764dfe"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#a9759eb7d00728507beeff0cfd4764dfe">isPositionChanged</a> ()</td></tr>
<tr class="memdesc:a9759eb7d00728507beeff0cfd4764dfe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if position has changed more than 5 metres.  <a href="#a9759eb7d00728507beeff0cfd4764dfe">More...</a><br /></td></tr>
<tr class="separator:a9759eb7d00728507beeff0cfd4764dfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85bbbd663b1310c7cf9b3741edd024d4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#a85bbbd663b1310c7cf9b3741edd024d4">isSpeedChanged</a> ()</td></tr>
<tr class="memdesc:a85bbbd663b1310c7cf9b3741edd024d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if speed has changed more than 1 m/sec.  <a href="#a85bbbd663b1310c7cf9b3741edd024d4">More...</a><br /></td></tr>
<tr class="separator:a85bbbd663b1310c7cf9b3741edd024d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a01338616a1593106f34e11037fdcfc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#a6a01338616a1593106f34e11037fdcfc">isTimeToTriggerCAM</a> ()</td></tr>
<tr class="memdesc:a6a01338616a1593106f34e11037fdcfc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if time more than 1 second has past since last CAM.  <a href="#a6a01338616a1593106f34e11037fdcfc">More...</a><br /></td></tr>
<tr class="separator:a6a01338616a1593106f34e11037fdcfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95346a021565806eb8fc3fa692d4242f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#a95346a021565806eb8fc3fa692d4242f">scheduleNextTrigger</a> ()</td></tr>
<tr class="memdesc:a95346a021565806eb8fc3fa692d4242f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Schedules next triggering checks for new CAM.  <a href="#a95346a021565806eb8fc3fa692d4242f">More...</a><br /></td></tr>
<tr class="separator:a95346a021565806eb8fc3fa692d4242f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad83192a66ecb929f8ad55aa78fd1901a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#ad83192a66ecb929f8ad55aa78fd1901a">isGPSdataValid</a> ()</td></tr>
<tr class="memdesc:ad83192a66ecb929f8ad55aa78fd1901a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the last received GPS data is still valid.  <a href="#ad83192a66ecb929f8ad55aa78fd1901a">More...</a><br /></td></tr>
<tr class="separator:ad83192a66ecb929f8ad55aa78fd1901a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a63f58a51e237a2ce285dfad60dd05572"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structGlobalConfig.html">GlobalConfig</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#a63f58a51e237a2ce285dfad60dd05572">mGlobalConfig</a></td></tr>
<tr class="separator:a63f58a51e237a2ce285dfad60dd05572"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a413302dc0b882fe6cbdf0b65f36ffc89"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structCaServiceConfig.html">CaServiceConfig</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#a413302dc0b882fe6cbdf0b65f36ffc89">mConfig</a></td></tr>
<tr class="separator:a413302dc0b882fe6cbdf0b65f36ffc89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8d61aebc3cd8e73af83b431bac8bb8d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCommunicationReceiver.html">CommunicationReceiver</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#af8d61aebc3cd8e73af83b431bac8bb8d">mReceiverFromDcc</a></td></tr>
<tr class="separator:af8d61aebc3cd8e73af83b431bac8bb8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f71fe8af0b4b1491621077b37915f55"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCommunicationSender.html">CommunicationSender</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#a5f71fe8af0b4b1491621077b37915f55">mSenderToDcc</a></td></tr>
<tr class="separator:a5f71fe8af0b4b1491621077b37915f55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ab0d0ef94d716be8ef7cea7a4a3a236"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCommunicationSender.html">CommunicationSender</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#a9ab0d0ef94d716be8ef7cea7a4a3a236">mSenderToLdm</a></td></tr>
<tr class="separator:a9ab0d0ef94d716be8ef7cea7a4a3a236"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53276e938767537a90a707098c97809f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCommunicationReceiver.html">CommunicationReceiver</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#a53276e938767537a90a707098c97809f">mReceiverGps</a></td></tr>
<tr class="separator:a53276e938767537a90a707098c97809f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbfa36ac20687e16b7e92ca5b9e4fab9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCommunicationReceiver.html">CommunicationReceiver</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#acbfa36ac20687e16b7e92ca5b9e4fab9">mReceiverObd2</a></td></tr>
<tr class="separator:acbfa36ac20687e16b7e92ca5b9e4fab9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08747ba9a682a7e26cc53911ba17fd00"><td class="memItemLeft" align="right" valign="top">boost::thread *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#a08747ba9a682a7e26cc53911ba17fd00">mThreadReceive</a></td></tr>
<tr class="separator:a08747ba9a682a7e26cc53911ba17fd00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a417545e7b75daab491a52e24e9f1e427"><td class="memItemLeft" align="right" valign="top">boost::thread *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#a417545e7b75daab491a52e24e9f1e427">mThreadGpsDataReceive</a></td></tr>
<tr class="separator:a417545e7b75daab491a52e24e9f1e427"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3b3cde2887fa1b2c3b94dba721fcdf8"><td class="memItemLeft" align="right" valign="top">boost::thread *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#ae3b3cde2887fa1b2c3b94dba721fcdf8">mThreadObd2DataReceive</a></td></tr>
<tr class="separator:ae3b3cde2887fa1b2c3b94dba721fcdf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ababf15f0e88d2dd40214f6d356f3954e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classLoggingUtility.html">LoggingUtility</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#ababf15f0e88d2dd40214f6d356f3954e">mLogger</a></td></tr>
<tr class="separator:ababf15f0e88d2dd40214f6d356f3954e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11c599516742eeba1dce25fb63b182ba"><td class="memItemLeft" align="right" valign="top">boost::asio::io_service&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#a11c599516742eeba1dce25fb63b182ba">mIoService</a></td></tr>
<tr class="separator:a11c599516742eeba1dce25fb63b182ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17d6e9a07ef51793975183c815563664"><td class="memItemLeft" align="right" valign="top">boost::asio::deadline_timer *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#a17d6e9a07ef51793975183c815563664">mTimer</a></td></tr>
<tr class="separator:a17d6e9a07ef51793975183c815563664"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc2a4915042e4cad88edf1c78c5464e2"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#adc2a4915042e4cad88edf1c78c5464e2">mIdCounter</a></td></tr>
<tr class="separator:adc2a4915042e4cad88edf1c78c5464e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a917b0ed05bd6252a7b8041e6a5a67815"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#a917b0ed05bd6252a7b8041e6a5a67815">mCamTriggerInterval</a></td></tr>
<tr class="separator:a917b0ed05bd6252a7b8041e6a5a67815"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a088f72814ed94affe72732aff71fd385"><td class="memItemLeft" align="right" valign="top">gpsPackage::GPS&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#a088f72814ed94affe72732aff71fd385">mLatestGps</a></td></tr>
<tr class="separator:a088f72814ed94affe72732aff71fd385"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae42bde71a9047d6fbf6dea6af38b4fe2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#ae42bde71a9047d6fbf6dea6af38b4fe2">mGpsValid</a></td></tr>
<tr class="memdesc:ae42bde71a9047d6fbf6dea6af38b4fe2"><td class="mdescLeft">&#160;</td><td class="mdescRight">True iff a GPS was received and it is not too old.  <a href="#ae42bde71a9047d6fbf6dea6af38b4fe2">More...</a><br /></td></tr>
<tr class="separator:ae42bde71a9047d6fbf6dea6af38b4fe2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3588b4ebdb345cf7b3aab23932a57846"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#a3588b4ebdb345cf7b3aab23932a57846">mMutexLatestGps</a></td></tr>
<tr class="separator:a3588b4ebdb345cf7b3aab23932a57846"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84dcfd9aa06a201719595748fde1a4f0"><td class="memItemLeft" align="right" valign="top">obd2Package::OBD2&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#a84dcfd9aa06a201719595748fde1a4f0">mLatestObd2</a></td></tr>
<tr class="separator:a84dcfd9aa06a201719595748fde1a4f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d45e868a2ec30b87b27737513872c14"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#a2d45e868a2ec30b87b27737513872c14">mObd2Valid</a></td></tr>
<tr class="memdesc:a2d45e868a2ec30b87b27737513872c14"><td class="mdescLeft">&#160;</td><td class="mdescRight">True iff a OBD2 was received and it is not too old.  <a href="#a2d45e868a2ec30b87b27737513872c14">More...</a><br /></td></tr>
<tr class="separator:a2d45e868a2ec30b87b27737513872c14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2492450b78ff86f90a87aab8317b2b4"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#aa2492450b78ff86f90a87aab8317b2b4">mMutexLatestObd2</a></td></tr>
<tr class="separator:aa2492450b78ff86f90a87aab8317b2b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a985bea7ee8707b44b6469973b5371695"><td class="memItemLeft" align="right" valign="top">camPackage::CAM&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCaService.html#a985bea7ee8707b44b6469973b5371695">mLastSentCam</a></td></tr>
<tr class="separator:a985bea7ee8707b44b6469973b5371695"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class that handles the receiving, creating and sending of CA Messages. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a78a32257b5cc71d737dbd5fdd15daf29"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">INITIALIZE_EASYLOGGINGPP CaService::CaService </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structCaServiceConfig.html">CaServiceConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ad6fdb21975bd8bcb62f0198796f5e251"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CaService::~CaService </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a995e320e7b1f29554288cb929593fde2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">camPackage::CAM CaService::generateCam </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generates a new CAM. </p>
<p>The new CAM includes the MAC address as stationId, an increasing but not unique ID, a current time stamp, and the latest GPS and OBD2 data if it is not too old (as configured). </p><dl class="section return"><dt>Returns</dt><dd>The newly generated CAM. </dd></dl>

</div>
</div>
<a class="anchor" id="aec7622a245a0aaebd85100c06dd77d8c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dataPackage::DATA CaService::generateData </td>
          <td>(</td>
          <td class="paramtype">camPackage::CAM&#160;</td>
          <td class="paramname"><em>cam</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generates a new data package that includes the specified CAM. </p>
<p>The specified CAM is serialized and included in the new data package. Additionally, the ID, type, priority, creation time and life time of the specified CAM are included. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cam</td><td>The CAM to be included in the data package. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The newly generated data package. </dd></dl>

</div>
</div>
<a class="anchor" id="ad6148607c13a0fba2c93ca7805f98b21"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CaService::getDistance </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lat1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lon1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lat2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lon2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates the distance between the two specified coordinates. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lat1</td><td>Latitude of coordinate 1. </td></tr>
    <tr><td class="paramname">lon1</td><td>Longitude of coordinate 1. </td></tr>
    <tr><td class="paramname">lat2</td><td>Latitude of coordinate 2. </td></tr>
    <tr><td class="paramname">lon2</td><td>Longitude of coordinate 2. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The distance in meters. </dd></dl>

</div>
</div>
<a class="anchor" id="ad27624cda96aba9c539ae9675c59f5ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CaService::getHeading </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lat1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lon1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lat2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lon2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates the heading towards North based on the two specified coordinates. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lat1</td><td>Latitude of coordinate 1. </td></tr>
    <tr><td class="paramname">lon1</td><td>Longitude of coordinate 1. </td></tr>
    <tr><td class="paramname">lat2</td><td>Latitude of coordinate 2. </td></tr>
    <tr><td class="paramname">lon2</td><td>Longitude of coordinate 2. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The heading in degrees. </dd></dl>

</div>
</div>
<a class="anchor" id="ad83192a66ecb929f8ad55aa78fd1901a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CaService::isGPSdataValid </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if the last received GPS data is still valid. </p>
<dl class="section return"><dt>Returns</dt><dd>True if gps data is valid, false otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a48ac117d5580a5c90960d81a0db9a9f2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CaService::isHeadingChanged </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if heading has changed more than 4 degrees. </p>
<dl class="section return"><dt>Returns</dt><dd>True if CAM needs to be triggered, false otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="a9759eb7d00728507beeff0cfd4764dfe"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CaService::isPositionChanged </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if position has changed more than 5 metres. </p>
<dl class="section return"><dt>Returns</dt><dd>True if CAM needs to be triggered, false otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="a85bbbd663b1310c7cf9b3741edd024d4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CaService::isSpeedChanged </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if speed has changed more than 1 m/sec. </p>
<dl class="section return"><dt>Returns</dt><dd>True if CAM needs to be triggered, false otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="a6a01338616a1593106f34e11037fdcfc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CaService::isTimeToTriggerCAM </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if time more than 1 second has past since last CAM. </p>
<dl class="section return"><dt>Returns</dt><dd>True if CAM needs to be triggered, false otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="a2484d629c6218e25411fb368c7cdaf39"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CaService::logDelay </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>serializedCam</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Logs the delay of the specified (serialized) CAM between its creation time and the current time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">serializedCam</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a3a3f9e0fbd18b5ea1fd9dbfbbc47b24f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CaService::receive </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Receives incoming CAMs from <a class="el" href="classDCC.html" title="Decentralized Congestion Control. ">DCC</a> and forwards them to <a class="el" href="classLDM.html" title="The Local Dynamic Map (LDM) is responsible for maintaining data that is part of ITS. ">LDM</a>. </p>
<p>Receives serialized DATA packages from <a class="el" href="classDCC.html" title="Decentralized Congestion Control. ">DCC</a>, deserializes it, and forwards the contained serialized CAM to <a class="el" href="classLDM.html" title="The Local Dynamic Map (LDM) is responsible for maintaining data that is part of ITS. ">LDM</a>. </p>

</div>
</div>
<a class="anchor" id="ae447eb670857e702acd207abb4821b3a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CaService::receiveGpsData </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Receives new GPS data from the GPS module. </p>

</div>
</div>
<a class="anchor" id="aa694c3e6d4163bcecdd75d8945bd8a4c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CaService::receiveObd2Data </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Receives new OBD2 data from the OBD2 module. </p>

</div>
</div>
<a class="anchor" id="a95346a021565806eb8fc3fa692d4242f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CaService::scheduleNextTrigger </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Schedules next triggering checks for new CAM. </p>

</div>
</div>
<a class="anchor" id="ad8bf18fb0bf24dba2eb8c60a5868bc36"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CaService::send </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a new CAM to <a class="el" href="classLDM.html" title="The Local Dynamic Map (LDM) is responsible for maintaining data that is part of ITS. ">LDM</a> and <a class="el" href="classDCC.html" title="Decentralized Congestion Control. ">DCC</a>. </p>

</div>
</div>
<a class="anchor" id="ada633e818d6379d6989778f3cfd8d708"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CaService::sendCamInfo </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>triggerReason</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>delta</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends information about why a CAM was triggered to <a class="el" href="classLDM.html" title="The Local Dynamic Map (LDM) is responsible for maintaining data that is part of ITS. ">LDM</a>. </p>
<p>Sends serialized camInfo to <a class="el" href="classLDM.html" title="The Local Dynamic Map (LDM) is responsible for maintaining data that is part of ITS. ">LDM</a>, including the current time and the specified reason for triggering. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">triggerReason</td><td>Difference in time, heading, position, or speed. </td></tr>
    <tr><td class="paramname">delta</td><td>Specifies how big the difference in time, heading, position, or speed is. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5906435dafacd0771261f7754631ad3d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CaService::triggerCam </td>
          <td>(</td>
          <td class="paramtype">const boost::system::error_code &amp;&#160;</td>
          <td class="paramname"><em>ec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Periodically checks the rules for triggering a new CAM. </p>
<p>Checks every 100ms whether the difference in time, heading, position, or speed requires the triggering of a new CAM. Reasons for triggering are: The time difference since the last triggered CAM is at least one second. The heading since the last CAM changed by more than four degrees. The position since the last CAM changed by more than five meters. The speed since the last CAM changed by more than 1m/s. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ec</td><td>Boost error code </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a917b0ed05bd6252a7b8041e6a5a67815"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double CaService::mCamTriggerInterval</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a413302dc0b882fe6cbdf0b65f36ffc89"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structCaServiceConfig.html">CaServiceConfig</a> CaService::mConfig</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a63f58a51e237a2ce285dfad60dd05572"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structGlobalConfig.html">GlobalConfig</a> CaService::mGlobalConfig</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ae42bde71a9047d6fbf6dea6af38b4fe2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CaService::mGpsValid</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>True iff a GPS was received and it is not too old. </p>

</div>
</div>
<a class="anchor" id="adc2a4915042e4cad88edf1c78c5464e2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">long CaService::mIdCounter</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a11c599516742eeba1dce25fb63b182ba"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::asio::io_service CaService::mIoService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a985bea7ee8707b44b6469973b5371695"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">camPackage::CAM CaService::mLastSentCam</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a088f72814ed94affe72732aff71fd385"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">gpsPackage::GPS CaService::mLatestGps</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a84dcfd9aa06a201719595748fde1a4f0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">obd2Package::OBD2 CaService::mLatestObd2</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ababf15f0e88d2dd40214f6d356f3954e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classLoggingUtility.html">LoggingUtility</a>* CaService::mLogger</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a3588b4ebdb345cf7b3aab23932a57846"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex CaService::mMutexLatestGps</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aa2492450b78ff86f90a87aab8317b2b4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex CaService::mMutexLatestObd2</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a2d45e868a2ec30b87b27737513872c14"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CaService::mObd2Valid</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>True iff a OBD2 was received and it is not too old. </p>

</div>
</div>
<a class="anchor" id="af8d61aebc3cd8e73af83b431bac8bb8d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCommunicationReceiver.html">CommunicationReceiver</a>* CaService::mReceiverFromDcc</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a53276e938767537a90a707098c97809f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCommunicationReceiver.html">CommunicationReceiver</a>* CaService::mReceiverGps</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="acbfa36ac20687e16b7e92ca5b9e4fab9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCommunicationReceiver.html">CommunicationReceiver</a>* CaService::mReceiverObd2</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a5f71fe8af0b4b1491621077b37915f55"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCommunicationSender.html">CommunicationSender</a>* CaService::mSenderToDcc</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a9ab0d0ef94d716be8ef7cea7a4a3a236"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCommunicationSender.html">CommunicationSender</a>* CaService::mSenderToLdm</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a417545e7b75daab491a52e24e9f1e427"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::thread* CaService::mThreadGpsDataReceive</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ae3b3cde2887fa1b2c3b94dba721fcdf8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::thread* CaService::mThreadObd2DataReceive</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a08747ba9a682a7e26cc53911ba17fd00"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::thread* CaService::mThreadReceive</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a17d6e9a07ef51793975183c815563664"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::asio::deadline_timer* CaService::mTimer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/jan/repos/pg2015w/cam/src/<a class="el" href="caservice_8h_source.html">caservice.h</a></li>
<li>/home/jan/repos/pg2015w/cam/src/<a class="el" href="caservice_8cpp.html">caservice.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classCaService.html">CaService</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
